<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" printOrder="Horizontal" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="817" leftMargin="15" rightMargin="10" topMargin="10" bottomMargin="10" uuid="66a1df0b-120a-4b6e-851e-7e828c99a2c8">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="ND1" uuid="8cd9e0c4-2ea0-49e9-bdd9-d9a93f095d74">
		<parameter name="date1" class="java.util.Date"/>
		<parameter name="date2" class="java.util.Date"/>
		<queryString>
			<![CDATA[select
  rg.rabotnikgruppa,
  rg.name,
  coalesce(rs.sums, 0) as perem,
  coalesce((
     select
      sum(j.qty*sc.price)
    from scladproduct sc
    inner join FURNITURARETURNSCLAD j on j.scladproduct = sc.scladproduct
    where j.dates between $P{date1} and $P{date2} and j.status > 1 and j.chex = rg.rabotnikgruppa
  ),0) as vozvr
from rabotnikgruppa rg
left join (
select
  rg.rabotnikgruppa as id,
  sum(j.qty*sc.price) as sums
from documentfjournal j
inner join documentf d on d.documentf = j.documentf
inner join scladproduct sc on j.scladproduct = sc.scladproduct
inner join rabotnikgruppa rg on rg.rabotnikgruppa = d.chex
where d.dates between $P{date1} and $P{date2} and rg.gruppa = 1
group by rg.rabotnikgruppa

) rs on rs.id = rg.rabotnikgruppa
where rg.gruppa = 1 and rg.del = 0
order by rg.name]]>
		</queryString>
		<field name="RABOTNIKGRUPPA" class="java.lang.Integer"/>
		<field name="NAME" class="java.lang.String"/>
		<field name="PEREM" class="java.math.BigDecimal"/>
		<field name="VOZVR" class="java.math.BigDecimal"/>
	</subDataset>
	<parameter name="date1" class="java.util.Date"/>
	<parameter name="date2" class="java.util.Date"/>
	<queryString>
		<![CDATA[select ID, NAME, SSUMMA, PSUMMA, SPSUMMA, RSUMMA, SCLSUMMA, ENDSUMMA
from GET_FURNITURA_SUMMA_ALL($P{date1}, $P{date2})]]>
	</queryString>
	<field name="ID" class="java.lang.Integer"/>
	<field name="NAME" class="java.lang.String"/>
	<field name="SSUMMA" class="java.math.BigDecimal"/>
	<field name="PSUMMA" class="java.math.BigDecimal"/>
	<field name="SPSUMMA" class="java.math.BigDecimal"/>
	<field name="RSUMMA" class="java.math.BigDecimal"/>
	<field name="SCLSUMMA" class="java.math.BigDecimal"/>
	<field name="ENDSUMMA" class="java.math.BigDecimal"/>
	<variable name="lines" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[$F{ID}]]></variableExpression>
		<initialValueExpression><![CDATA[]]></initialValueExpression>
	</variable>
	<variable name="PSUMMA_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{PSUMMA}]]></variableExpression>
	</variable>
	<variable name="SSUMMA_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{SSUMMA}]]></variableExpression>
	</variable>
	<variable name="RSUMMA_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{RSUMMA}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="28">
			<staticText>
				<reportElement x="0" y="0" width="165" height="20" uuid="a215f94b-fc75-456d-b70a-c9492e3ea80a"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Times New Roman" isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[Движение фурнитуры с]]></text>
			</staticText>
			<textField pattern="dd-MM-yyyy">
				<reportElement x="165" y="0" width="77" height="20" uuid="8a8b0579-1e1d-4c05-9b34-10b9a2a93158"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{date1}]]></textFieldExpression>
			</textField>
			<textField pattern="dd-MM-yyyy">
				<reportElement x="269" y="0" width="100" height="20" uuid="ea774261-db98-47b1-9c19-3a1ca2032c48"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{date2}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="242" y="0" width="27" height="20" uuid="14b85757-de91-4246-9236-fd83046d821a"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[по]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="25"/>
	</pageHeader>
	<columnHeader>
		<band height="16">
			<staticText>
				<reportElement x="31" y="0" width="100" height="16" uuid="bd623a59-ec47-49d5-8e08-a9384ae6bff6"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[Н.Остаток]]></text>
			</staticText>
			<staticText>
				<reportElement x="431" y="0" width="100" height="16" uuid="c6ae7519-b356-4448-b1aa-bf01bd75f3f9"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[Перемещения в цех]]></text>
			</staticText>
			<staticText>
				<reportElement x="331" y="0" width="100" height="16" uuid="9119b8cd-3f5c-4b5d-b41d-d7e6f8288eda"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[Возвраты]]></text>
			</staticText>
			<staticText>
				<reportElement x="231" y="0" width="100" height="16" uuid="49504161-d848-4398-9928-6c984c25b524"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[Списания]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="0" width="31" height="16" uuid="ba95f952-8528-4b8c-ac48-49c1e42d3256"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[№]]></text>
			</staticText>
			<staticText>
				<reportElement x="131" y="0" width="100" height="16" uuid="7714e988-2df9-43c9-bde9-52e8ba5f42fe"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[Приход]]></text>
			</staticText>
			<staticText>
				<reportElement x="531" y="0" width="100" height="16" uuid="8dff64df-08ea-428e-b275-8a49b62de371"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[К.Остаок]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="16" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="31" height="16" uuid="3ca4d989-231f-444f-8f6b-af265dd4a6ec"/>
				<box rightPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{lines}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="31" y="0" width="100" height="16" uuid="ef535f5d-e043-43b7-a1d8-31821952c7b9"/>
				<box rightPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="12" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SSUMMA}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="131" y="0" width="100" height="16" uuid="47d7df63-7378-4892-9275-babb4f32fa4e"/>
				<box rightPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="12" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PSUMMA}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="231" y="0" width="100" height="16" uuid="6e843a46-9e74-4344-b0fa-e3222c014320"/>
				<box rightPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="12" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SPSUMMA}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="331" y="0" width="100" height="16" uuid="561ffa6d-3a27-4c43-aff3-db428263cebe"/>
				<box rightPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="12" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{RSUMMA}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="431" y="0" width="100" height="16" uuid="37c41c85-9844-4d68-9ac1-893bc997bc40"/>
				<box rightPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="12" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SCLSUMMA}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="531" y="0" width="100" height="16" uuid="94cb218e-fa37-409b-89f7-b3f819781da6"/>
				<box rightPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="12" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ENDSUMMA}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="24"/>
	</pageFooter>
	<summary>
		<band height="81">
			<componentElement>
				<reportElement key="table" style="table" x="31" y="13" width="360" height="68" uuid="da071374-d462-4cba-89fb-7b6e950b04f8"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="ND1" uuid="455b3b08-3f2d-448b-814c-b51ec36ca2b0">
						<datasetParameter name="date1">
							<datasetParameterExpression><![CDATA[$P{date1}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="date2">
							<datasetParameterExpression><![CDATA[$P{date2}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="31" uuid="9a977a7f-f53a-49c2-ab6b-965b3dac6846">
						<jr:columnHeader style="table" height="30" rowSpan="1"/>
						<jr:detailCell style="table_TD" height="20" rowSpan="1"/>
					</jr:column>
					<jr:column width="209" uuid="0ab93907-cac6-4f59-8494-664613c6a6c5">
						<jr:columnHeader style="table" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="209" height="30" uuid="8d8fd9d9-2f31-4155-a27e-837c9fd71bdd"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
								</textElement>
								<text><![CDATA[Цех]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="20" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="209" height="20" uuid="fce832b4-9928-4140-92b0-2c25e2a5ebc4"/>
								<box leftPadding="2">
									<pen lineWidth="0.25"/>
									<topPen lineWidth="0.25"/>
									<leftPen lineWidth="0.25"/>
									<bottomPen lineWidth="0.25"/>
									<rightPen lineWidth="0.25"/>
								</box>
								<textElement verticalAlignment="Middle">
									<font pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{NAME}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="80" uuid="d08657ee-d4f4-453f-90cf-809be2fb649f">
						<jr:columnHeader style="table" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="80" height="30" uuid="c47850fa-4825-4b94-9fdb-c0303fbaa6de"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
								</textElement>
								<text><![CDATA[Перемещение]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="20" rowSpan="1">
							<textField pattern="#,##0.00">
								<reportElement x="0" y="0" width="80" height="20" uuid="e180ae79-5125-4b80-a535-770f86214ae2"/>
								<box rightPadding="2">
									<pen lineWidth="0.25"/>
									<topPen lineWidth="0.25"/>
									<leftPen lineWidth="0.25"/>
									<bottomPen lineWidth="0.25"/>
									<rightPen lineWidth="0.25"/>
								</box>
								<textElement textAlignment="Right" verticalAlignment="Middle">
									<font pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{PEREM}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="80" uuid="8966fda3-56a9-4f04-91a1-c544abada342">
						<jr:columnHeader style="table" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="80" height="30" uuid="9846044d-5878-499b-8e1f-532a582c6ec0"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
								</textElement>
								<text><![CDATA[Возврат]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="20" rowSpan="1">
							<textField pattern="#,##0.00">
								<reportElement x="0" y="0" width="80" height="20" uuid="95d7a080-2117-446d-8355-f5a986dc3f50"/>
								<box rightPadding="2">
									<pen lineWidth="0.25"/>
									<topPen lineWidth="0.25"/>
									<leftPen lineWidth="0.25"/>
									<bottomPen lineWidth="0.25"/>
									<rightPen lineWidth="0.25"/>
								</box>
								<textElement textAlignment="Right" verticalAlignment="Middle">
									<font pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{VOZVR}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
		</band>
	</summary>
</jasperReport>
