<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" pageWidth="570" pageHeight="822" columnWidth="570" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="66a1df0b-120a-4b6e-851e-7e828c99a2c8">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="WebFarma"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<parameter name="DOC" class="java.lang.Integer"/>
	<parameter name="date1" class="java.util.Date"/>
	<parameter name="date2" class="java.util.Date"/>
	<queryString>
		<![CDATA[select
 nom ,
 name,
 sumo,
 sumsf,
 article,
 nomer,
 zadacha,
 chex
from
(
select
  mo.nom,
  o.name,
  (select sum(zkr.qty) from zadachakomplektovkarazmeri zkr where zkr.zadachakomplektovka = zk.zadachakomplektovka) as sumo,
  (select coalesce(sum(rro.qty),0) from rabotnikoperation rro where rro.zadachakomplektovka = zk.zadachakomplektovka and rro.operation = o.operation) as sumsf,
  m.article,
  zk.nomer,
  z.nomer as zadacha,
  rg.name as chex
from zadachakomplektovka zk
inner join zadacha z on z.zadacha = zk.zadacha
inner join model m on m.model = z.model
inner join modeloperation mo on mo.model = m.model
inner join operation o on o.operation = mo.operation
inner join rabotnikgruppa rg on zk.chex = rg.rabotnikgruppa
where zk.dates between $P{date1} and $P{date2})
where sumo < sumsf]]>
	</queryString>
	<field name="NOM" class="java.lang.Integer"/>
	<field name="NAME" class="java.lang.String"/>
	<field name="SUMO" class="java.lang.Long"/>
	<field name="SUMSF" class="java.lang.Long"/>
	<field name="ARTICLE" class="java.lang.String"/>
	<field name="NOMER" class="java.lang.String"/>
	<field name="ZADACHA" class="java.lang.String"/>
	<field name="CHEX" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="44">
			<staticText>
				<reportElement x="43" y="22" width="227" height="20" uuid="01f6bc52-9b76-4602-b61e-27aad26d623c"/>
				<box>
					<bottomPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Times New Roman" size="12" isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[Превышение операций по маршрутам с]]></text>
			</staticText>
			<textField pattern="dd-MM-yyyy">
				<reportElement x="270" y="22" width="72" height="20" uuid="98676578-e544-44ec-b6dd-ea55dd046db9"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{date1}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="342" y="22" width="22" height="20" uuid="f6691ad1-af71-4104-963b-dabec8649292"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[по]]></text>
			</staticText>
			<textField pattern="dd-MM-yyyy">
				<reportElement x="364" y="22" width="74" height="20" uuid="64ec2c1e-9570-4ad6-ba89-3078fce1af67"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="true" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{date2}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<columnHeader>
		<band height="15">
			<staticText>
				<reportElement x="28" y="0" width="47" height="15" uuid="b26fabea-8ee6-4f6d-93bd-19e949eb3e9a"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[Операция]]></text>
			</staticText>
			<staticText>
				<reportElement x="75" y="0" width="61" height="15" uuid="f2e40248-c569-4f3a-83c5-edde0bd4161e"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[Артикул]]></text>
			</staticText>
			<staticText>
				<reportElement x="136" y="0" width="79" height="15" uuid="442b16a7-8a8f-4c7a-9ce5-05a6b4bc3859"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[Маршрут]]></text>
			</staticText>
			<staticText>
				<reportElement x="420" y="0" width="61" height="15" uuid="0adf425e-e0ed-4b74-93e7-92fb96530258"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[Кол-во теор.]]></text>
			</staticText>
			<staticText>
				<reportElement x="215" y="0" width="78" height="15" uuid="e7adb2f7-31cf-4a58-8666-4e5da672ef12"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[Задача]]></text>
			</staticText>
			<staticText>
				<reportElement x="293" y="0" width="127" height="15" uuid="656d7cb7-08d2-43a3-abe9-664f4210f16b"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[Цех]]></text>
			</staticText>
			<staticText>
				<reportElement x="481" y="0" width="64" height="15" uuid="cf1c60f1-5dc0-4350-8243-d4718c518b1f"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<text><![CDATA[Кол-во факт.]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="15" splitType="Stretch">
			<textField>
				<reportElement x="75" y="0" width="61" height="15" uuid="2c6c766c-bab7-4d1c-a72d-9ca63eadeffd"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ARTICLE}]]></textFieldExpression>
			</textField>
			<textField pattern="dd-MM-yyyy" isBlankWhenNull="true">
				<reportElement x="136" y="0" width="79" height="15" uuid="22dc59a7-e88c-42d1-ba50-16124971d4d0"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{NOMER}]]></textFieldExpression>
			</textField>
			<textField pattern="dd-MM-yyyy">
				<reportElement x="293" y="0" width="127" height="15" uuid="3b2a4b2c-cce2-409a-a2a1-915e140b6c9d"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{CHEX}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="28" y="0" width="47" height="15" uuid="d4e6069a-dbde-4269-a5e4-e9d1a462dc48"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{NAME}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="215" y="0" width="78" height="15" uuid="1586d7bf-d7ce-4526-9625-d8cfcb2b3da2"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ZADACHA}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="420" y="0" width="61" height="15" uuid="66411a64-3a01-42f0-b791-09987a17ad40"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SUMO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="481" y="0" width="64" height="15" uuid="1a901710-bd67-4853-9a59-49b757a8dc34"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" pdfFontName="arial.ttf" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SUMSF}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="1"/>
	</summary>
</jasperReport>
